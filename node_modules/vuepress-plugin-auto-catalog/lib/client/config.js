import{usePageData as $,useSiteData as k,defineClientConfig as w}from"@vuepress/client";import{useLocaleConfig as G,endsWith as d,isPlainObject as O,VPLink as u,startsWith as C,keys as P,isNumber as m,hasGlobalComponent as T}from"vuepress-shared/client";import{isString as D,ensureLeadingSlash as R,ensureEndingSlash as V}from"@vuepress/shared";import{defineComponent as j,ref as B,computed as H,h as e}from"vue";import{useRouter as N}from"vue-router";import"./styles/auto-catalog.scss";import{useAutoCatalogGetter as U,injectAutoCatalogGetter as W}from"./index.js";var I=j({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,hideHeading:Boolean},setup(a){__VUEPRESS_DEV__&&a.indexType&&console.warn("[AutoCatalog]: `indexType` is deprecated, please use `index` instead");const A=U(),f=G(AUTO_CATALOG_LOCALES),S=$(),y=N(),_=k(),L=B(y.getRoutes().map(({meta:o,path:n})=>{const r=A(o);if(!r)return null;const s=n.split("/").length;return{level:d(n,"/")?s-2:s-1,base:n.replace(/\/[^/]+\/?$/,"/"),path:n,...r}}).filter(o=>O(o)&&D(o.title))),E=()=>{const o=a.base?R(V(a.base)):S.value.path.replace(/\/[^/]+$/,"/"),n=o.split("/").length-2,r=[];return L.value.filter(({level:s,path:t})=>{if(!C(t,o)||t===o)return!1;if(o==="/"){const i=P(_.value.locales).filter(l=>l!=="/");if(t==="/404.html"||i.some(l=>C(t,l)))return!1}return s-n<=a.level&&(d(t,".html")&&!d(t,"/index.html")||d(t,"/"))}).sort(({title:s,level:t,order:i},{title:l,level:c,order:p})=>t-c||(m(i)?m(p)?i>0?p>0?i-p:-1:p<0?i-p:1:i:m(p)?p:s.localeCompare(l))).forEach(s=>{const{base:t,level:i}=s;switch(i-n){case 1:r.push(s);break;case 2:{const l=r.find(c=>c.path===t);l&&(l.children??=[]).push(s);break}default:{const l=r.find(c=>c.path===t.replace(/\/[^/]+\/$/,"/"));if(l){const c=l.children?.find(p=>p.path===t);c&&(c.children??=[]).push(s)}}}}),r},g=H(()=>E());return()=>{const o=g.value.some(n=>n.children);return e("div",{class:["vp-catalog-wrapper",{index:a.index}]},[a.hideHeading?null:e("h2",{class:"vp-catalog-main-title"},f.value.title),g.value.length?e(a.index?"ol":"ul",{class:["vp-catalogs",{deep:o}]},g.value.map(({children:n=[],title:r,path:s,content:t})=>{const i=e(u,{class:"vp-catalog-title",to:s},()=>t?e(t):r);return e("li",{class:"vp-catalog"},o?[e("h3",{id:r,class:["vp-catalog-child-title",{"has-children":n.length}]},[e("a",{href:`#${r}`,class:"header-anchor","aria-hidden":!0},"#"),i]),n.length?e(a.index?"ol":"ul",{class:"vp-child-catalogs"},n.map(({children:l=[],content:c,path:p,title:v})=>e("li",{class:"vp-child-catalog"},[e("div",{class:["vp-catalog-sub-title",{"has-children":l.length}]},[e("a",{href:`#${v}`,class:"header-anchor"},"#"),e(u,{class:"vp-catalog-title",to:p},()=>c?e(c):v)]),l.length?e(a.index?"ol":"div",{class:a.index?"vp-sub-catalogs":"vp-sub-catalogs-wrapper"},l.map(({content:h,path:b,title:x})=>a.index?e("li",{class:"vp-sub-catalog"},e(u,{to:b},()=>h?e(h):x)):e(u,{class:"vp-sub-catalog-link",to:b},()=>h?e(h):x))):null]))):null]:e("div",{class:"vp-catalog-child-title"},i))})):e("p",{class:"vp-empty-catalog"},f.value.empty)])}}}),q=w({enhance:({app:a})=>{W(a),T("AutoCatalog",a)||a.component("AutoCatalog",I)}});export{q as default};
//# sourceMappingURL=config.js.map
