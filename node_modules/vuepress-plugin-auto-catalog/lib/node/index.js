import{useSassPalettePlugin as f}from"vuepress-plugin-sass-palette";import{Logger as h,ensureEndingSlash as C,getTitleFromFilename as K,createConverter as v,checkVersion as L,getLocales as k,addViteSsrNoExternal as x}from"vuepress-shared/node";import{createPage as $}from"@vuepress/core";import{getDirname as w,path as A,colors as E}from"@vuepress/utils";const I=w(import.meta.url),r="vuepress-plugin-auto-catalog",u=new h(r),O=C(A.resolve(I,"../client")),G=async(t,{component:a="AutoCatalog",exclude:l=[],frontmatter:g=()=>({}),level:i=3,index:n=!1})=>{const{env:{isDebug:p},pages:d}=t,s=new Set,y=`<${a}${[1,2].includes(i)?` :level="${i}"`:""}${n?" index":""}/>
`;d.forEach(({path:e,pathLocale:c})=>{let o=e;if(e!=="/404.html")for(;o!==c;)o=o.replace(/\/(?:[^/]+\/?)$/,"/"),!s.has(o)&&l.every(m=>!o.match(m))&&d.every(({path:m})=>m!==o)&&(p&&u.info(`Generating catalog ${o}`),s.add(o))}),await Promise.all(Array.from(s).map(e=>decodeURI(e)).map(e=>{const[,c=""]=/\/([^/]+)\/?$/.exec(e)||[],o=K(c);return $(t,{frontmatter:{title:o,...g(e)||{}},content:y,path:e})})).then(e=>{t.pages.push(...e)})},P=t=>{const{deprecatedLogger:a,droppedLogger:l}=v("auto-catalog");a({options:t,old:"getTitle",new:"titleGetter"}),a({options:t,old:"getIcon",new:"iconGetter"}),a({options:t,old:"getOrder",new:"orderGetter"}),a({options:t,old:"getIndex",new:"shouldIndex"}),l({options:t,old:"iconComponent",msg:`please use ${E.magenta("defineAutoCatalogIconComponent")} in client config file.`})},S={"/en/":{title:"Catalog",empty:"No catalog"},"/zh/":{title:"目录",empty:"暂无目录"},"/zh-tw/":{title:"目錄",empty:"暫無目錄"},"/de/":{title:"Katalog",empty:"Kein Katalog"},"/de-at/":{title:"Katalog",empty:"Kein Katalog"},"/vi/":{title:"Danh mục",empty:"Không có danh mục"},"/uk/":{title:"Каталог",empty:"Немає каталогу"},"/ru/":{title:"Каталог",empty:"Нет каталога"},"/br/":{title:"Catálogo",empty:"Sem catálogo"},"/pl/":{title:"Katalog",empty:"Brak katalogu"},"/sk/":{title:"Katalóg",empty:"Žiadny katalóg"},"/fr/":{title:"Catalogue",empty:"Pas de catalogue"},"/es/":{title:"Catálogo",empty:"Sin catálogo"},"/ja/":{title:"カタログ",empty:"カタログなし"},"/tr/":{title:"Katalog",empty:"Katalog yok"},"/ko/":{title:"목차",empty:"목차 없음"},"/fi/":{title:"Luettelo",empty:"Ei luetteloa"},"/hu/":{title:"Katalógus",empty:"Nincs katalógus"},"/id/":{title:"Katalog",empty:"Tidak ada katalog"},"/nl/":{title:"Catalogus",empty:"Geen catalogus"}},N=(t={},a=!0)=>l=>{a&&P(t),L(l,r,"2.0.0-rc.0"),l.env.isDebug&&u.info("Options:",t),f(l,{id:"hope"});const{component:g,locales:i}=t;return{name:r,define:()=>({AUTO_CATALOG_LOCALES:k({app:l,name:r,default:S,config:i})}),onInitialized:n=>G(n,t),extendsBundlerOptions:(n,p)=>{x(n,p,"vuepress-shared")},...g?{}:{clientConfigFile:`${O}config.js`}}};export{N as autoCatalogPlugin};
//# sourceMappingURL=index.js.map
