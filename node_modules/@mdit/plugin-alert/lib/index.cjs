"use strict";var N=require("markdown-it/lib/common/utils.js");const U=/^>(?:(?: {0,3})| {0,2}\t {0,1})\[!(.*)\]\s*$/i,W=(i,{alertNames:R=["tip","warning","caution","important","note"],deep:q=!1,openRender:M,closeRender:w,titleRender:y}={})=>{const T=(t,r,l,$)=>{if(t.sCount[r]-t.blkIndent>=4||t.level!==0&&!q)return!1;const S=t.bMarks[r]+t.tShift[r],x=t.eMarks[r];if(t.src.charAt(S)!==">")return!1;const p=U.exec(t.src.slice(S,x));if(!p||!R.includes(p[1].toLowerCase()))return!1;if($)return!0;const k=p[1].toLowerCase(),b=[],h=[],n=[],u=[],J=t.lineMax,L=t.parentType,I=t.md.block.ruler.getRules("alert");t.parentType="alert";let e;for(e=r+1;e<l;e++){let s=!1,_=!1,o=t.bMarks[e]+t.tShift[e];const m=t.eMarks[e],E=t.sCount[e]<t.blkIndent;if(o>=m)break;if(t.src.charCodeAt(o++)===62&&!E){let a,c=t.sCount[e]+1;t.src.charCodeAt(o)===32?(o++,c++,s=!1,a=!0):t.src.charCodeAt(o)===9?(a=!0,(t.bsCount[e]+c)%4===3?(o++,c++,s=!1):s=!0):a=!1;let C=c;for(b.push(t.bMarks[e]),t.bMarks[e]=o;o<m;){const A=t.src.charCodeAt(o);if(N.isSpace(A))A===9?C+=4-(C+t.bsCount[e]+(s?1:0))%4:C++;else break;o++}_=o>=m,h.push(t.bsCount[e]),t.bsCount[e]=t.sCount[e]+1+(a?1:0),n.push(t.sCount[e]),t.sCount[e]=C-c,u.push(t.tShift[e]),t.tShift[e]=o-t.bMarks[e];continue}if(_)break;let v=!1;for(let a=0;a<I.length;a++)if(I[a](t,e,l,!0)){v=!0;break}if(v){t.lineMax=e,t.blkIndent!==0&&(b.push(t.bMarks[e]),h.push(t.bsCount[e]),u.push(t.tShift[e]),n.push(t.sCount[e]),t.sCount[e]-=t.blkIndent);break}b.push(t.bMarks[e]),h.push(t.bsCount[e]),u.push(t.tShift[e]),n.push(t.sCount[e]),t.sCount[e]=-1}const z=t.blkIndent;t.blkIndent=0;const j=[r,r+1],g=[r+1,0],f=t.push("alert_open","div",1);f.markup=k,f.attrJoin("class",`markdown-alert markdown-alert-${k}`),f.map=g;const d=t.push("alert_title","",0);d.attrJoin("class","markdown-alert-title"),d.markup=k,d.content=p[1],d.map=j,t.md.block.tokenize(t,r+1,e);const B=t.push("alert_close","div",-1);B.markup=k,t.lineMax=J,t.parentType=L,g[1]=t.line;for(let s=0;s<u.length;s++)t.bMarks[s+r]=b[s],t.tShift[s+r]=u[s],t.sCount[s+r]=n[s],t.bsCount[s+r]=h[s];return t.blkIndent=z,!0};i.block.ruler.before("blockquote","alert",T,{alt:["paragraph","reference","blockquote","list"]}),M&&(i.renderer.rules.alert_open=M),w&&(i.renderer.rules.alert_close=w),i.renderer.rules.alert_title=y||((t,r)=>{const l=t[r];return`<p class="markdown-alert-title">${l.content[0].toUpperCase()+l.content.substring(1).toLowerCase()}</p>
`})};exports.alert=W;
//# sourceMappingURL=index.cjs.map
