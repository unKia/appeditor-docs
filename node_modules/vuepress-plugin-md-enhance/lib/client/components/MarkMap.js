import{useEventListener as c,useDebounceFn as f}from"@vueuse/core";import{defineComponent as v,ref as g,shallowRef as m,onMounted as y,onUnmounted as M,h as o}from"vue";import{atou as h,LoadingIcon as k}from"vuepress-shared/client";import"../styles/markmap.scss";var w=v({name:"MarkMap",props:{id:{type:String,required:!0},content:{type:String,required:!0}},setup(a){const n=g(!0),s=m(),i=m();let e=null;return c("resize",f(()=>{e?.fit()},100)),y(()=>{Promise.all([import("markmap-lib"),import("markmap-toolbar"),import("markmap-view"),new Promise(r=>setTimeout(r,MARKDOWN_ENHANCE_DELAY))]).then(async([{Transformer:r},{Toolbar:p},{Markmap:l}])=>{const u=new r,{root:d}=u.transform(h(a.content));e=l.create(i.value);const{el:t}=p.create(e);e.setData(d),await e.fit(),t.style.position="absolute",t.style.bottom="0.5rem",t.style.right="0.5rem",s.value.append(t),n.value=!1})}),M(()=>{e?.destroy()}),()=>o("div",{class:"markmap-wrapper",ref:s},[o("svg",{ref:i,class:"markmap-svg",id:a.id}),n.value?o(k,{class:"markmap-loading",height:360}):null])}});export{w as default};
//# sourceMappingURL=MarkMap.js.map
